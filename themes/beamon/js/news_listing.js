(function($)
{
	"use strict";
	var settings = {};
	function subPageFiltering(_settings)
	{
		
		settings = $.extend(settings,_settings);
		settings.target.masonry(
		{
  			itemSelector: 'article',
  			gutterWidth: 40
		});
		settings.target.infinitescroll({
			navSelector  : settings.navigation,
			nextSelector : settings.next,
			itemSelector : "article",
			debug :true,
			loading:
			{
        		finishedMsg: "<strong>Du har läst alla nyheter!</strong>",
        		img: "data:image/gif;base64,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",
        		msgText: "<strong>Hämtar fler nyheter...</strong>",
        	}
		}, update);
		settings.navigation.hide();

	}
	function update(newElements)
	{
		var $newElems = $( newElements ).css({ opacity: 0 });
		$newElems.imagesLoaded(function()
		{
		$newElems.animate({ opacity: 1 });
		settings.target.masonry( 'appended', $newElems, true );
		});
	}
	function init()
	{
		var settings =
		{
			"target" : $(".news-list .span12"),
			"navigation" : $("div.ccm-pagination"),
			"next" : $("div.ccm-pagination span.ccm-page-right a"),
			"amount" : 4

		};
		new subPageFiltering($.extend(settings,window.newsListSettings));
		
	}
	$().ready(init);
})(jQuery);